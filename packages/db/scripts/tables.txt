-- Tabela: Offer_Status
CREATE TABLE Offer_Status (
    pk_offer_status SERIAL PRIMARY KEY,
    os_status VARCHAR(255) NOT NULL
);

INSERT INTO Offer_Status (os_status) VALUES
    ('Em aberto'),
    ('Em negociação'),
    ('Cancelado'),
    ('Aprovado'),
    ('Reprovado');

-- Tabela: Delivery_Process_Status
CREATE TABLE Delivery_Process_Status (
    pk_delivery_process_status SERIAL PRIMARY KEY,
    dps_status VARCHAR(255) NOT NULL
);

INSERT INTO Delivery_Process_Status (dps_status) VALUES
    ('Criada'),
    ('Coleta Agendada'),
    ('Faturado'),
    ('Coletada'),
    ('A caminho'),
    ('Entregue'),
    ('Entrega confirmada');

-- Tabela: Payment_Status
CREATE TABLE Payment_Status (
    pk_payment_status SERIAL PRIMARY KEY,
    ps_status VARCHAR(255) NOT NULL
);

INSERT INTO Payment_Status (ps_status) VALUES
    ('Aprovado'),
    ('Reprovado');

-- Tabela: Payment_Type
CREATE TABLE Payment_Type (
    pk_payment_type SERIAL PRIMARY KEY,
    pt_type VARCHAR(255) NOT NULL
);

INSERT INTO Payment_Type (pt_type) VALUES
    ('PIX'),
    ('Cartão de Crédito');

-- Tabela: Delivery_Appointment_Status
CREATE TABLE Delivery_Appointment_Status (
    pk_delivery_appointment_status SERIAL PRIMARY KEY,
    das_status VARCHAR(255) NOT NULL
);

INSERT INTO Delivery_Appointment_Status (das_status) VALUES
    ('Coletada'),
    ('A caminho'),
    ('Entregue');

-- Tabela: Item_Remittance_Type
CREATE TABLE Item_Remittance_Type (
    pk_item_remittance_type SERIAL PRIMARY KEY,
    irt_type VARCHAR(255) NOT NULL
);

INSERT INTO Item_Remittance_Type (irt_type) VALUES
    ('Documentos'),
    ('Inflamável'),
    ('Eletrônicos'),
    ('Frágil');


--***CREATE***

-- Tabela: Offer
CREATE TABLE Offer (
pk_offer SERIAL PRIMARY KEY,
of_status VARCHAR(255) NOT NULL,
of_subtotal FLOAT NOT NULL,
of_taxes FLOAT,
of_total FLOAT NOT NULL,
of_delivery_forecast TIMESTAMP NOT NULL,
fk_quotation INT,
fk_fleet_vehicle INT,
FOREIGN KEY (fk_quotation) REFERENCES Quotation(pk_quotation),
FOREIGN KEY (fk_fleet_vehicle) REFERENCES Fleet_Vehicle(pk_fleet_vehicle)
);

-- Tabela: Fleet_Vehicle
CREATE TABLE Fleet_Vehicle (
pk_fleet_vehicle SERIAL PRIMARY KEY,
fv_modal VARCHAR(255) NOT NULL,
fv_plate VARCHAR(255) NOT NULL,
fv_cpf_driver VARCHAR(255) NOT NULL,
fv_revam VARCHAR(255) NOT NULL,
fk_fleet INT,
FOREIGN KEY (fk_fleet) REFERENCES Fleet(pk_fleet)
);

-- Tabela: Fleet
CREATE TABLE Fleet (
pk_fleet SERIAL PRIMARY KEY,
fl_name VARCHAR(255) NOT NULL
);

-- Tabela: Quotation
CREATE TABLE Quotation (
pk_quotation SERIAL PRIMARY KEY,
qu_cpf VARCHAR(255) NOT NULL,
qu_email VARCHAR(255) NOT NULL,
qu_current_date TIMESTAMP NOT NULL,
fk_origin_address INT,
fk_destination_address INT,
FOREIGN KEY (fk_origin_address) REFERENCES Address(pk_address),
FOREIGN KEY (fk_destination_address) REFERENCES Address(pk_address)
);

-- Tabela: Item_Remittance
CREATE TABLE Item_Remittance (
pk_item_remittance SERIAL PRIMARY KEY,
ir_type_object VARCHAR(255) NOT NULL,
ir_weight FLOAT NOT NULL,
fk_item_remittance_type INT,
FOREIGN KEY (fk_item_remittance_type) REFERENCES  Item_Remittance_Type(
pk_item_remittance_type)
);

-- Tabela: Remittance_Type_Tax
CREATE TABLE Remittance_Type_Tax (
pk_remittance_type_tax SERIAL PRIMARY KEY,
rrt_type_object VARCHAR(255) NOT NULL,
rrt_calculation_basis VARCHAR(255) NOT NULL
);

-- Tabela: Address
CREATE TABLE Address (
pk_address SERIAL PRIMARY KEY,
ad_street_address VARCHAR(255) NOT NULL,
ad_number INT NOT NULL,
ad_city VARCHAR(255) NOT NULL,
ad_state VARCHAR(255) NOT NULL,
ad_country VARCHAR(255) NOT NULL,
ad_zip_code VARCHAR(255) NOT NULL,
ad_geo_latitude INT,
ad_geo_longitude FLOAT
);

-- Tabela: Collection_Schedule
CREATE TABLE Collection_Schedule (
pk_collection_schedule SERIAL PRIMARY KEY,
cs_schedule_date TIMESTAMP NOT NULL,
cs_comment VARCHAR(255),
fk_collection_address INT,
FOREIGN KEY (fk_collection_address) REFERENCES Address(pk_address)
);

-- Tabela: Delivery_Process
CREATE TABLE Delivery_Process (
pk_delivery_process SERIAL PRIMARY KEY,
dp_status VARCHAR(255) NOT NULL,
fk_offer INT,
fk_feedback INT,
FOREIGN KEY (fk_offer) REFERENCES Offer(pk_offer),
FOREIGN KEY (fk_feedback) REFERENCES Feedback(pk_feedback)
);

-- Tabela: Payment
CREATE TABLE Payment (
pk_payment SERIAL PRIMARY KEY,
pa_status VARCHAR(255) NOT NULL,
pa_type VARCHAR(255) NOT NULL,
fk_delivery_process INT,
FOREIGN KEY (fk_delivery_process) REFERENCES
 Delivery_Process(pk_delivery_process)
);

-- Tabela: Delivery_Appointment
CREATE TABLE Delivery_Appointment (
pk_delivery_appointment SERIAL PRIMARY KEY,
da_status VARCHAR(255) NOT NULL,
da_appointment_date TIMESTAMP NOT NULL,
fk_current_address INT,
fk_delivery_process INT,
FOREIGN KEY (fk_current_address) REFERENCES Address(pk_address),
FOREIGN KEY (fk_delivery_process) REFERENCES 
Delivery_Process(pk_delivery_process)
);

-- Tabela: Feedback
CREATE TABLE Feedback (
pk_feedback SERIAL PRIMARY KEY,
fe_rating INT NOT NULL,
fe_comment VARCHAR(255)
);

-- Tabela: User
CREATE TABLE Users (
pk_user SERIAL PRIMARY KEY,
user_name VARCHAR(255) NOT NULL,
user_cpf VARCHAR(255) NOT NULL,
user_email VARCHAR(255) NOT NULL,
user_password VARCHAR(255) NOT NULL,
user_session VARCHAR(255) NOT NULL
);

--***INSERT***

-- Inserção em Fleet
INSERT INTO Fleet (fl_name) VALUES
    ('Frota A'),
    ('Frota B'),
    ('Frota C');

-- Inserção em Address
INSERT INTO Address (ad_street_address, ad_number, ad_city, ad_state, ad_country, ad_zip_code, ad_geo_latitude, ad_geo_longitude) VALUES
    ('Rua A', 123, 'Cidade A', 'Estado A', 'País A', '12345-678', 123, 45.678),
    ('Rua B', 456, 'Cidade B', 'Estado B', 'País B', '54321-876', 456, 67.890),
    ('Rua C', 789, 'Cidade C', 'Estado C', 'País C', '98765-432', 789, 12.345);

-- Inserção em User
INSERT INTO Users (user_name, user_cpf, user_email, user_password, user_session) VALUES
    ('Usuário A', '123.456.789-00', 'usuarioa@example.com', 'senhaA123', 'sessaoA'),
    ('Usuário B', '987.654.321-00', 'usuariob@example.com', 'senhaB456', 'sessaoB'),
    ('Usuário C', '111.222.333-00', 'usuarioc@example.com', 'senhaC789', 'sessaoC');

-- Inserção em Item_Remittance_Type
INSERT INTO Item_Remittance_Type (irt_type) VALUES
    ('Documentos'),
    ('Inflamável'),
    ('Eletrônicos'),
    ('Frágil');

-- Inserção em Remittance_Type_Tax
INSERT INTO Remittance_Type_Tax (rrt_type_object, rrt_calculation_basis) VALUES
    ('Documentos', 100),
    ('Inflamável', 450),
    ('Eletrônicos', 200),
    ('Frágil', 80);

-- Inserção em Feedback
INSERT INTO Feedback (fe_rating, fe_comment) VALUES
    (5, 'Ótimo serviço'),
    (4, 'Bom atendimento'),
    (3, 'Poderia ser melhor');

-- Inserção em Quotation
INSERT INTO Quotation (qu_cpf, qu_email, qu_current_date, fk_origin_address, fk_destination_address) VALUES
    ('123.456.789-00', 'usuarioa@example.com', '2023-08-22 10:00:00', 1, 2),
    ('987.654.321-00', 'usuariob@example.com', '2023-08-23 15:00:00', 2, 3),
    ('111.222.333-00', 'usuarioc@example.com', '2023-08-24 09:30:00', 1, 3);

-- Inserção em Collection_Schedule
INSERT INTO Collection_Schedule (cs_schedule_date, cs_comment, fk_collection_address) VALUES
    ('2023-08-22 11:00:00', 'Coleta agendada para amanhã', 1),
    ('2023-08-23 16:00:00', 'Coleta reagendada para depois de amanhã', 2),
    ('2023-08-24 10:30:00', 'Coleta agendada para depois de amanhã', 3);

-- Delivery_process
INSERT INTO Delivery_Process (dp_status, fk_offer, fk_feedback)
VALUES
    ('Em andamento', 7, 1),
    ('Concluído', 8, 2);

select * from Delivery_Process

-- Inserção em Payment
INSERT INTO Payment (pa_status, pa_type, fk_delivery_process) VALUES
    ('Aprovado', 'PIX', 3),
    ('Reprovado', 'Cartão de Crédito', 4);

--
INSERT INTO Fleet_Vehicle (fv_modal, fv_plate, fv_cpf_driver, fv_revam, fk_fleet)
VALUES
    ('Modal1', 'ABC123', '123.456.789-00', 'REVAM123', 1),
    ('Modal2', 'XYZ789', '987.654.321-00', 'REVAM456', 2);

-- Inserção em Offer
INSERT INTO Offer (of_status, of_subtotal, of_taxes, of_total, of_delivery_forecast, fk_quotation, fk_fleet_vehicle) VALUES
    ('Em aberto', 100.00, 15.00, 115.00, '2023-08-23 14:00:00', 1, 1),
    ('Em negociação', 200.00, 30.00, 230.00, '2023-08-24 16:00:00', 2, 2);

select * from Offer
